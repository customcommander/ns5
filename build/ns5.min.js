(function(){function get_validator(schema,key){var validator=schema[key];if(typeof validator==="undefined"){return function(){return true}}if(!NS5.isFunction(validator)){validator=NS5[validator]?NS5[validator]:function(val){return schema[key]===val}}return validator}function get_function_signature(func){var params=func.toString().match(/^function.+?\(([\s\S]*?)\)\s*\{/);params=params[1].match(/(\w+)/g);return params?params:[]}function map_arguments(args,func){var ret={},sig=get_function_signature(func),i;for(i=0;i<args.length;i++){ret[sig[i]]=args[i]}return ret}function NS5(schema){if(!NS5.isObject(schema)){throw new TypeError("NS5: schema is not an object")}this._schema=schema}NS5.isObject=function(thing){return Object.prototype.toString.call(thing)==="[object Object]"};NS5.isString=function(thing){return typeof thing==="string"};NS5.isBoolean=function(thing){return thing===true||thing===false};NS5.isFunction=function(thing){return typeof thing==="function"};NS5.isArray=Array.isArray||function(thing){return Object.prototype.toString.call(thing)==="[object Array]"};NS5.isNumber=function(thing){return typeof thing==="number"};NS5.isFiniteNumber=function(thing){return typeof thing==="number"&&isFinite(thing)};NS5.isDate=function(thing){return Object.prototype.toString.call(thing)==="[object Date]"};NS5.isArguments=function(thing){return Object.prototype.toString.call(thing)==="[object Arguments]"};NS5.register=function(fn_name,fn,args){fn_name=NS5.isString(fn_name)?fn_name:null;fn=NS5.isFunction(fn)?fn:null;args=NS5.isArray(args)?args:[];if(!fn_name||!fn||NS5[fn_name]){return false}NS5[fn_name]=function(val,key,data){return fn.apply(null,[val,key,data].concat(args))};return NS5[fn_name]};NS5.prototype.test=function(thing,func){var validator,key;if(NS5.isArguments(thing)){try{func=NS5.isFunction(func)?func:thing.callee}catch(e){throw new Error("NS5.test(): cannot verify arguments without the originating function in strict mode")}thing=map_arguments(thing,func)}if(!NS5.isObject(thing)){return true}for(key in thing){validator=get_validator(this._schema,key);if(validator(thing[key],key,thing)!==true){return false}}return true};NS5.prototype.pick=function(thing,func){var obj={},key,validator;if(NS5.isArguments(thing)){try{func=NS5.isFunction(func)?func:thing.callee}catch(e){throw new Error("NS5.pick(): cannot verify arguments without the originating function in strict mode")}thing=map_arguments(thing,func)}if(!NS5.isObject(thing)){return thing}for(key in thing){validator=get_validator(this._schema,key);if(validator(thing[key],key,thing)===true){obj[key]=thing[key]}}return obj};window.NS5=NS5})();